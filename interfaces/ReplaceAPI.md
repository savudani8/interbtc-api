[@interlay/interbtc-api](/README.md) / [Exports](/modules.md) / ReplaceAPI

# Interface: ReplaceAPI

## Implemented by

- [`DefaultReplaceAPI`](/classes/DefaultReplaceAPI.md)

## Table of contents

### Methods

- [accept](/interfaces/ReplaceAPI.md#accept)
- [execute](/interfaces/ReplaceAPI.md#execute)
- [getDustValue](/interfaces/ReplaceAPI.md#getdustvalue)
- [getReplacePeriod](/interfaces/ReplaceAPI.md#getreplaceperiod)
- [getRequestById](/interfaces/ReplaceAPI.md#getrequestbyid)
- [list](/interfaces/ReplaceAPI.md#list)
- [map](/interfaces/ReplaceAPI.md#map)
- [mapReplaceRequests](/interfaces/ReplaceAPI.md#mapreplacerequests)
- [request](/interfaces/ReplaceAPI.md#request)
- [withdraw](/interfaces/ReplaceAPI.md#withdraw)

## Methods

### <a id="accept" name="accept"></a> accept

▸ **accept**(`oldVault`, `amount`, `collateral`, `btcAddress`): `Promise`<`void`\>

Accept a replace request

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `oldVault` | `AccountId` | ID of the old vault that to be (possibly partially) replaced |
| `amount` | `MonetaryAmount`<`Currency`<{ `BTC`: ``8`` ; `Satoshi`: ``0``  }\>, { `BTC`: ``8`` ; `Satoshi`: ``0``  }\> | Amount of issued tokens to be replaced |
| `collateral` | `MonetaryAmount`<`Currency`<{ `DOT`: ``10`` ; `Planck`: ``0``  } \| { `KSM`: ``12`` ; `Planck`: ``0``  }\>, { `DOT`: ``10`` ; `Planck`: ``0``  } \| { `KSM`: ``12`` ; `Planck`: ``0``  }\> | The collateral for replacement |
| `btcAddress` | `string` | The address that old-vault should transfer the btc to |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/replace.ts:83](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L83)

___

### <a id="execute" name="execute"></a> execute

▸ **execute**(`requestId`, `btcTxId`): `Promise`<`void`\>

Execute a replace request

**`remarks`** If `txId` is not set, the `merkleProof` and `rawTx` must both be set.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `requestId` | `string` | The ID generated by the replace request transaction |
| `btcTxId` | `string` | Bitcoin transaction ID |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/replace.ts:96](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L96)

___

### <a id="getdustvalue" name="getdustvalue"></a> getDustValue

▸ **getDustValue**(): `Promise`<`MonetaryAmount`<`Currency`<{ `BTC`: ``8`` ; `Satoshi`: ``0``  }\>, { `BTC`: ``8`` ; `Satoshi`: ``0``  }\>\>

#### Returns

`Promise`<`MonetaryAmount`<`Currency`<{ `BTC`: ``8`` ; `Satoshi`: ``0``  }\>, { `BTC`: ``8`` ; `Satoshi`: ``0``  }\>\>

The minimum amount of btc that is accepted for replace requests; any lower values would
risk the bitcoin client to reject the payment

#### Defined in

[src/parachain/replace.ts:38](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L38)

___

### <a id="getreplaceperiod" name="getreplaceperiod"></a> getReplacePeriod

▸ **getReplacePeriod**(): `Promise`<`BlockNumber`\>

#### Returns

`Promise`<`BlockNumber`\>

The time difference in number of blocks between when a replace request is created
and required completion time by a vault. The replace period has an upper limit
to prevent griefing of vault collateral.

#### Defined in

[src/parachain/replace.ts:44](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L44)

___

### <a id="getrequestbyid" name="getrequestbyid"></a> getRequestById

▸ **getRequestById**(`replaceId`): `Promise`<[`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)\>

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `replaceId` | `string` \| `H256` | The ID of the replace request to fetch |

#### Returns

`Promise`<[`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)\>

A replace request object

#### Defined in

[src/parachain/replace.ts:57](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L57)

___

### <a id="list" name="list"></a> list

▸ **list**(): `Promise`<[`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)[]\>

#### Returns

`Promise`<[`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)[]\>

An array containing the replace requests

#### Defined in

[src/parachain/replace.ts:48](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L48)

___

### <a id="map" name="map"></a> map

▸ **map**(): `Promise`<`Map`<`H256`, [`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)\>\>

#### Returns

`Promise`<`Map`<`H256`, [`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)\>\>

A mapping from the replace request ID to the replace request object

#### Defined in

[src/parachain/replace.ts:52](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L52)

___

### <a id="mapreplacerequests" name="mapreplacerequests"></a> mapReplaceRequests

▸ **mapReplaceRequests**(`vaultAccountId`): `Promise`<[`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)[]\>

Fetch the replace requests associated with a vault. In the returned requests,
the vault is either the replaced or the replacing one.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `vaultAccountId` | `AccountId` | The AccountId of the vault used to filter replace requests |

#### Returns

`Promise`<[`ReplaceRequestExt`](/interfaces/ReplaceRequestExt.md)[]\>

An array with replace requests involving said vault

#### Defined in

[src/parachain/replace.ts:104](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L104)

___

### <a id="request" name="request"></a> request

▸ **request**(`amount`, `collateralCurrency`): `Promise`<`void`\>

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `amount` | `MonetaryAmount`<`Currency`<{ `BTC`: ``8`` ; `Satoshi`: ``0``  }\>, { `BTC`: ``8`` ; `Satoshi`: ``0``  }\> | Amount issued, denoted in Bitcoin, to have replaced by another vault |
| `collateralCurrency` | `Currency`<{ `DOT`: ``10`` ; `Planck`: ``0``  }\> \| `Currency`<{ `KSM`: ``12`` ; `Planck`: ``0``  }\> | Collateral currency to have replaced |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/replace.ts:62](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L62)

___

### <a id="withdraw" name="withdraw"></a> withdraw

▸ **withdraw**(`amount`, `collateralCurrency`): `Promise`<`void`\>

Wihdraw a replace request

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `amount` | `MonetaryAmount`<`Currency`<{ `BTC`: ``8`` ; `Satoshi`: ``0``  }\>, { `BTC`: ``8`` ; `Satoshi`: ``0``  }\> | The amount of wrapped tokens to withdraw from the amount requested to have replaced. |
| `collateralCurrency` | `Currency`<{ `DOT`: ``10`` ; `Planck`: ``0``  }\> \| `Currency`<{ `KSM`: ``12`` ; `Planck`: ``0``  }\> | Collateral currency of the request |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/replace.ts:72](https://github.com/interlay/interbtc-api/blob/b81f698/src/parachain/replace.ts#L72)
